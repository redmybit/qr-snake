<!doctype html><canvas id=c width=500 height=500 style=background:#000></canvas><script>const X=document.getElementById("c").getContext("2d"),S=50,W=10,H=10,K={w:[0,-1],a:[-1,0],s:[0,1],d:[1,0]},O={e:"#00f",s:"#0f0",a:"#f00"};let G=[],N=[],A=[],D="w",L=0,I=1e3/30,t=0;function B(){G=[];for(let y=0;y<H;y++){let r=[];for(let x=0;x<W;x++)r.push(O.e);G.push(r)}for(const s of N)G[s[1]][s[0]]=O.s;if(A.length)G[A[1]][A[0]]=O.a}function P(){let o=[];for(let y=0;y<H;y++)for(let x=0;x<W;x++)G[y][x]==O.e&&o.push([x,y]);if(!o.length)return[0,0];return o[Math.floor(Math.random()*o.length)]}function U(){let v=K[D],o=N.at(-1),n=[o[0]+v[0],o[1]+v[1]];if(n[0]<0||n[0]>=W||n[1]<0||n[1]>=H)Q();else{let f=G[n[1]][n[0]];if(f==O.s)Q();else{N.push(n);if(f!=O.a)N.shift();else A=P()}}}function E(){for(let y=0;y<H;y++)for(let x=0;x<W;x++){X.fillStyle=G[y][x];X.fillRect(x*S,y*S,S,S)}}function Q(){N=[[5,9],[5,8],[5,7],[5,6]];D="w";A=[];B();A=P();B()}function M(ts){requestAnimationFrame(M);const d=ts-L;if(d<I)return;L=ts-d%I;if(t%3==0)U();B();E();t++}window.addEventListener("keydown",e=>{let k=e.key;if(K[k]&&!(("ad".includes(k)&&"ad".includes(D))||("ws".includes(k)&&"ws".includes(D))))D=k});Q();E();requestAnimationFrame(M)</script>